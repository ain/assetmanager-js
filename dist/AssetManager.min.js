/*! AssetManager - v0.1.0 - 2013-02-06
* http://github.com/ain/assetmanager-js
* Copyright (c) 2013 Ain Tohvri; Licensed GPL */
function AssetManager(){this.successCount=0,this.failCount=0,this.cache={},this.queue=[]}AssetManager.prototype.add=function(e,t){return this.queue.push({id:e,path:t})},AssetManager.prototype.downloadAll=function(e){for(var t=0,n=this.queue.length;t<n;t++){var r=new Image;r.assetId=this.queue[t].id,r.callbacks={load:e},r.manager=this,r.addEventListener("load",this.handleImageLoadSuccess),r.addEventListener("error",this.handleImageLoadError),r.src=this.queue[t].path}},AssetManager.prototype.handleImageLoadSuccess=function(){this.manager.successCount++,this.manager.cache[this.assetId]=this,this.manager.isDone()&&this.callbacks.load.call()},AssetManager.prototype.handleImageLoadError=function(){this.manager.failCount++},AssetManager.prototype.isDone=function(){return this.queue.length===this.successCount+this.failCount},AssetManager.prototype.getAsset=function(e){return this.cache[e]};